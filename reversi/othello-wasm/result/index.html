<html>

<head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type" />
</head>

<body>
    <!-- Include the JS generated by `wasm-pack build` -->
    <script src='res/othello_wasm.js'></script>

    <script>
        // Like with the `--target web` output the exports are immediately
        // available but they won't work until we initialize the module. Unlike
        // `--target web`, however, the globals are all stored on a
        // `wasm_bindgen` global. The global itself is the initialization
        // function and then the properties of the global are all the exported
        // functions.
        //
        // Note that the name `wasm_bindgen` can be configured with the
        // `--no-modules-global` CLI flag
        const { ai_move } = wasm_bindgen;

        async function run() {
            await wasm_bindgen('res/othello_wasm_bg.wasm');

            // const result = ai_move("+OOOOOO+X+OOOO++XXOOXOOXXXXXXXX++XOXXOXO+XOOXXOO++OOXX+O++OOOO++", 2);
            // console.log(result);
        }

        run();

        async function inputRun() {
            let board = document.getElementById("board").value;
            let color = document.getElementById("color").value;
            color = parseInt(color);
            let t1 = window.performance.now();
            let result = ai_move(board, color);
            let t2 = window.performance.now();
            document.getElementById("result").innerHTML = "Result: " + result + "<br>Time: " + ((t2 - t1) / 1000.0);
        }
    </script>

    <h1>Rust Othello AI in WASM</h1>
    <label>board:</label>
    <input type="text" id="board"></input>
    <br>
    <label>color:</label>
    <input type="text" id="color"></input><br>
    <button type="button" onclick="inputRun();">run</button>
    <br><br>
    <lable id="result">Result: </lable>

</body>

</html>